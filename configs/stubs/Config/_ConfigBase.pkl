amends "../../../templates/ConfigTemplate.pkl"

import "../../../templates/InAppsTemplate.pkl"
import "../../../templates/ABTestsTemplate.pkl"
import "../../../templates/MonitoringTemplate.pkl"

monitoring {
  logs = MonitoringTemplate.logs
}

settings {
  slidingExpiration {
    config = "0.00:00:23"
  }
}

inapps {
  // InApp 1: Snackbar with redirectUrl action, true targeting
  new {
    id = "12345678-c777-4ac9-86b3-722c3e998cb6"
    sdkVersion { min = 8; max = null }
    frequency { kind = "lifetime"; $type = "once" }
    targeting {
      nodes { new InAppsTemplate.TrueNode {} }
      $type = "and"
    }
    form {
      variants {
        new InAppsTemplate.SnackbarVariant {
          content {
            background {
              layers {
                new {
                  action = new InAppsTemplate.RedirectUrlAction {
                    intentPayload = "Some payload test"
                    value = ""
                  }
                  source { value = "https://www.akusherstvo.ru/images/uploadfoto/events/in-app/in-app-app300-2.png"; $type = "url" }
                  $type = "image"
                }
              }
            }
            position {
              margin { kind = "dp"; top = 0; right = 0; left = 0; bottom = 0 }
              gravity { horizontal = "center"; vertical = "bottom" }
            }
            elements {
              new {
                color = "#000000"; lineWidth = 1
                size { kind = "dp"; width = 30; height = 30 }
                position { margin { kind = "proportion"; top = 0.05; right = 0.025; left = 0; bottom = 0 } }
              }
            }
          }
          imageUrl = ""; redirectUrl = ""; intentPayload = ""
        }
      }
    }
  }

  // InApp 2: Modal with pushPermission action, pushEnabled targeting
  new {
    id = "283d926e-7609-493b-8d1d-67e9a909847e"
    sdkVersion { min = 9; max = null }
    frequency { kind = "session"; $type = "once" }
    targeting {
      nodes { new InAppsTemplate.PushEnabledNode { value = false } }
      $type = "and"
    }
    form {
      variants {
        new InAppsTemplate.ModalVariant {
          content {
            background {
              layers {
                new {
                  action = new InAppsTemplate.PushPermissionAction {
                    intentPayload = "Ñ‚ÐµÑÑ‚Ð¾Ð²Ñ‹Ð¹ Ð¿ÐµÐ¹Ð»Ð¾Ð°Ð´"
                  }
                  source { value = "https://inapps-stable.mindbox.ru/media/default-push-modal-ru.png"; $type = "url" }
                  $type = "image"
                }
              }
            }
            elements {
              new {
                color = "#000000"; lineWidth = 1
                size { kind = "dp"; width = 18; height = 18 }
                position { margin { kind = "proportion"; top = 0.215; right = 0.0665; left = 0; bottom = 0 } }
              }
            }
          }
          imageUrl = ""; redirectUrl = ""; intentPayload = ""
        }
      }
    }
  }

  // InApp 3: Snackbar with redirectUrl, true targeting, no close button
  new {
    id = "4c7ee36b-e439-452a-b76a-3908f30766db"
    sdkVersion { min = 8; max = null }
    frequency { kind = "lifetime"; $type = "once" }
    targeting {
      nodes { new InAppsTemplate.TrueNode {} }
      $type = "and"
    }
    form {
      variants {
        new InAppsTemplate.SnackbarVariant {
          content {
            background {
              layers {
                new {
                  action = new InAppsTemplate.RedirectUrlAction {
                    intentPayload = ""
                    value = "https://www.forrestgerke.com/shop/apple-3x4-linoleum-block-print"
                  }
                  source { value = "https://images.squarespace-cdn.com/content/v1/524cb77be4b0bf732ffea906/1597867591991-JG1UEAX03TOY6EK76MEG/Apple+-+Product+Image.jpg"; $type = "url" }
                  $type = "image"
                }
              }
            }
            position {
              margin { kind = "dp"; top = 0; right = 0; left = 0; bottom = 0 }
              gravity { horizontal = "center"; vertical = "top" }
            }
            elements {}
          }
          imageUrl = ""; redirectUrl = ""; intentPayload = ""
        }
      }
    }
  }

  // InApp 4: Snackbar with redirectUrl, true targeting, colored close button
  new {
    id = "c68d2f2a-d3f6-40ef-b300-4597cced3453"
    sdkVersion { min = 8; max = null }
    frequency { kind = "lifetime"; $type = "once" }
    targeting {
      nodes { new InAppsTemplate.TrueNode {} }
      $type = "and"
    }
    form {
      variants {
        new InAppsTemplate.SnackbarVariant {
          content {
            background {
              layers {
                new {
                  action = new InAppsTemplate.RedirectUrlAction {
                    intentPayload = "Some payload test"
                    value = ""
                  }
                  source { value = "https://mobpush-images.mindbox.ru/Mpush-test/223/c41cd63a-fffb-49f9-afcf-58e213ddd677.png"; $type = "url" }
                  $type = "image"
                }
              }
            }
            position {
              margin { kind = "dp"; top = 0; right = 0; left = 0; bottom = 0 }
              gravity { horizontal = "center"; vertical = "top" }
            }
            elements {
              new {
                color = "#9E3535"; lineWidth = 5
                size { kind = "dp"; width = 40; height = 40 }
                position { margin { kind = "proportion"; top = 0.7; right = 0; left = 0; bottom = 0 } }
              }
            }
          }
          imageUrl = ""; redirectUrl = ""; intentPayload = ""
        }
      }
    }
  }
}

abtests = ABTestsTemplate.abtests
